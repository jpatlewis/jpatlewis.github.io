<head>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/drilldown.js"></script>
</head>

<div id="container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>

<script>
function initPie(itemData){
Highcharts.chart('container', {
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
    },
    title: {
        text: 'Materials purchased -- all time'
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
                enabled: false
            },
            showInLegend: true
        }
    },
    series: [{
        name: '',
        colorByPoint: true,
        data: [{
            name: 'materials purchased',
            y: itemData["all_time"]["mats_jobs"],
            drilldown: "mats"
        }, {
            name: 'no materials',
            y: itemData["all_time"]["no_mats_jobs"],
            drilldown: "no_mats"
        }],
    }]
});
}
$.ajax("https://835lnmapr1.execute-api.us-east-1.amazonaws.com/dev/stats/materials_purchased", {
        type: 'GET',
        success: function(data){
            initPie(data);
        }
      });

</script>